var me,meter=10;function init(){(me=tanks[0]).health=1/0,[SHOOT_DELAY,BULLET_SPEED,TANK_FORWARD_SPEED,TANK_REVERSE_SPEED,BULLET_LIFE]=[-1,120,80,80,999],gCamera.bounds={min:[0,0,0],max:[0,0,0]}}function implode(e){for(var t=e.rot,r=0;r<=360;r++)e.rot=t+r*Math.PI/180,entities.push(createBullet(e,0))}function teleport(e,t){var[r,a,n]=e.pos;r-=Math.cos(e.rot)*t,n+=Math.sin(e.rot)*t,e.pos=[r,a,n]}function togglePlane(e){e.hasBeenPlane?e.isPlane=!e.isPlane:makePlane(e)}function dialGrav(e){GRAVITY+=.01*e.deltaY}var shadowFury={findTargets(e){var[t,r,a]=e.pos,n=tanks.filter((function(n){if(n===e||!n.pos)return!1;var[o,i,s]=n.pos;return Math.sqrt((o-t)*(o-t)+(s-a)*(s-a)+(i-r))<12*meter}));return n.splice(5),n},next(e){this.targets.length<1&&(this.targets=this.findTargets(e)),teleportNext(e,this.targets.pop()),teleport(e,-BULLET_SPEED)},targets:[]};function teleportNext(e,t){e.pos=t.pos,e.rot=t.rot}function main(){init(),addEventListener("wheel",dialGrav),addEventListener("keydown",(function(e){switch(e.code){case"ControlLeft":case"ControlRight":if(e.repeat)return;togglePlane(me);break;case"Tab":if(e.repeat)return;shadowFury.next(me);break;case"Space":if(!e.shiftKey){if(e.repeat)return;e.stopImmediatePropagation(),teleport(me,meter)}implode(me)}}),!0)}main();